<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <div id='wrapper'>

        <h1><h:outputText value="Existing Accounts" /></h1>
        <br/>


        <div id="productGrid" style="text-align: center;">
            <h:form>
                <h:dataTable styleClass="datatable" id="datatable"
                             value="#{adminAccounts.accounts}" var="s_account">
                    <h:column>
                        <f:facet name="header">
                            <h:outputText value="Account ID" />
                        </f:facet>
                        <h:outputText value="#{s_account.ID}" />
                    </h:column>

                    <h:column>
                        <f:facet name="header">
                            <h:outputText value="Username" />
                        </f:facet> 
                        <h:outputText value="#{s_account.username}" />
                    </h:column>

                    <h:column>
                        <f:facet name="header">
                            <h:outputText value="Email Address"/>
                        </f:facet> 
                        <h:outputText value="#{s_account.email}" />
                    </h:column>

                    <h:column>
                        <f:facet name="header">
                            <h:outputText value="Hash"/>
                        </f:facet> 
                        <h:outputText value="#{s_account.PW_Hash}" />
                    </h:column>

                    <h:column>
                        <f:facet name="header">
                            <h:outputText value="Permission Level"/>
                        </f:facet> 
                        <h:outputText value="#{s_account.permission_Level}" />
                    </h:column>
                </h:dataTable>
            </h:form>
        </div>

        <hr/>

        <div id="adminAccountBox">
            <h:form>
                <h:panelGrid columns="3">

                    <h:column><h1>Create an Account</h1></h:column>
                    <h:column><h:panelGroup /></h:column>
                    <h:column><h:panelGroup /></h:column>

                    <h:column><h:outputLabel for="Username" value="Username:" /></h:column>
                    <h:column>
                        <h:inputText id='Username' value="#{adminAccounts.account.username}" required="true"
                                     requiredMessage="Please enter a valid username">
                            <f:validator validatorId="usernameValidator" />
                        </h:inputText>
                    </h:column>
                    <h:column><h:message styleClass="message" for='Username' /></h:column>

                    <h:column><h:outputLabel for="Email" value="Email Address:" /></h:column>
                    <h:column>
                        <h:inputText id="Email" value="#{adminAccounts.account.email}" required="true"
                                     requiredMessage="Please enter an email address">
                            <f:validator validatorId="emailValidator" />
                        </h:inputText>
                    </h:column>
                    <h:column><h:message styleClass="message" for="Email" /></h:column>

                    <h:column><h:outputLabel for="Password" value="Password:" /></h:column>
                    <h:column>
                        <h:inputSecret id="Password" value="#{adminAccounts.account.PW_Hash}" required="true" 
                                       requiredMessage="Please enter a password">
                            <f:validator validatorId="passwordValidator" />
                            <f:attribute name="confirm" value="#{confirm}" />
                        </h:inputSecret>
                    </h:column>
                    <h:column><h:message styleClass="message" for="Password" /></h:column>

                    <h:column><h:outputLabel for="Confirm" value="Confirm Password:" /></h:column>
                    <h:column>
                        <h:inputSecret id="Confirm" binding="#{confirm}" required="true" 
                                       requiredMessage="Please confirm your password" />
                    </h:column>
                    <h:column><h:message styleClass="message" for="Confirm" /></h:column>

                    <h:column><h:outputLabel for='Permission' value='Permission Level:' /></h:column>
                    <h:column>
                        <h:selectOneRadio id="Permissions" value="#{adminAccounts.account.permission_Level}" converter="javax.faces.Short">
                            <f:selectItem itemLabel="User" itemValue="0" />
                            <f:selectItem itemLabel="Admin" itemValue="1" />
                        </h:selectOneRadio>
                    </h:column>
                    <h:column><h:panelGroup /></h:column>

                    <h:column><h:panelGroup /></h:column>
                    <h:column>
                        <h:commandButton id="AddAccount" style="float:right;"
                                         value="Add Account" action="#{adminAccounts.registerNewUser}">
                            <f:param name="v" value="manage_accounts" />
                        </h:commandButton>
                    </h:column>
                    <h:column><h:panelGroup /></h:column>

                </h:panelGrid>
            </h:form>
        </div>

    </div> <!-- End Wrapper -->
</ui:composition>

